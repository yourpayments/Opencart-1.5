# «Твои платежи», модуль для CMS Opencart-1.5

![](https://repository-images.githubusercontent.com/638835276/ff494b04-d65b-4843-8759-e85c689a7e80)

[НКО «Твои Платежи»](https://YPMN.ru/ "Платёжная система для сайтов, платформ и приложений") - платёжная система для сайтов, платформ, игр и приложений.

Модуль добавляет интеграцию с платежной системой «Твои Платежи».
Модуль совместим с версиями OpenCart 1.5

## Установка модуля
1. Скачайте архив с модулем
2. Распакуйте архив и cкопируйте папки admin и catalog в корневую директорию вашего сайта, например ```public_html```
4. Перейдите в меню ```Дополнения / Оплата (Extensions / Payments)```
5. В списке вариантов оплаты выберите ```PayU```, нажмите на кнопку ```Установить```, затем на кнопку ```Изменить```
6. Настройте модуль

## Настройка модуля
Для настройки модуля Вам необходимо будет заполнить следующие поля
* ```Merchant ID```. Код продавца (идентификатор мерчанта). 
* ```Secret key```. Секретный Ключ. 

```Merchant ID``` и ```Secret key``` можно узнать в личном кабинете «Твои Платежи» на странице редактирования профиля в разделе ```Немедленное уведомление об оплате```

* ```Режим отладки (Debug mode)```. Включить или выключить режим отладки. При включенном режиме отладки фактическая оплата заказов не производиться! 
* ```Ссылка (Live Update) Link for Live Update```. Для российских и украинских мерчантов это поле заполнять не нужно.
* ```Ссылка возврата клиента (Back refference)```. Ссылка на страницу на которую будет возвращен пользователь после оплаты. Если это поле оставить пустым, пользователь останется в системе «Твои Платежи»
* ```Валюта мерчанта (Currency)```. Валюта платежа. Допустимые значения: RUB, EUR, USD. Если параметр не задан, значение по умолчанию: RUB.
* ```Процент НДС (VAT)```. НДС для каждого продукта в рамках заказа. 0 - НДС не облагается.
* ```НДС включен в сумму заказа (VAT included in order amount)```. Значение ***Да*** означает, что передаваемая сумма заказа в «Твои Платежи» окончательная, в противном случае к стоимости заказа будет добавленна сумма НДС  
* ```Язык страницы оплаты (Payment page language)```. Позволяет задавать определенный язык платежного интерфейса. Возможные значения: 
	* RO - румынский 
	* EN - английский 
	* HU - венгерский 
	* RU - русский 
	* DE - немецкий 
	* FR - французский 
	* IT - итальянский 
	* ES - испанский 
* ```Статус (Status)```. Текущий статус модуля. Переведите статус в "Включен", чтобы платежная система появилась на странице оформления заказа.
* ```Порядок сортировки (Ordering)```. Для управления порядком в списке платежных систем используйте это поле.

## IPN
Для настройки IPN Вам необходимо в настройках аккаунта «Твои Платежи» в разделе ```Уведомления IPN``` выбрать значение ***IPN (Instant Payment Notification)***.
Далее перейдя на страницу ```Настройки IPN``` в поле ```URL``` указать ссылку для IPN: ***http://{домен сайта}/index.php?route=extension/payment/payu/callback***.
Полный адрес ссылки можно посмотреть в настройках модуля в полу ```IPN URL```.
